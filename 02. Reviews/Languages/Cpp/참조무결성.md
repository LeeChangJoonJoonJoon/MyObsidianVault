

2023-05-10

----
#OracleDB #ERD #수업

## 개요
ERD, 즉 [[개념적 데이터베이스 모델링 (Conceptual Database Modeling)]]을 위해서는 먼저 실제 테이블을 분할하는 방법에 대해 알아야 한다.
이를테면 자동차 영업을 하는 상황에서 다음과 같은 테이블이 있다고 해보자.
![[스크린샷 2023-05-10 오후 9.38.20.png]]

고객의 정보를 어떻게 관리해야 좋을 것인가? 
테이블에 `Null` 값이 있는 것은 좋지 않은 구조이다.
자료의 양이 방대해질수록 이는 데이터베이스의 성능과 직결된 문제가 된다.
그런다고 `Null` 값을 가진 회원들의 정보를 삭제할 수는 없는 노릇이다.
*이게 바로 참조무결성의 문제의식이다.*

## 내용
자동차가 있는 회원과 없는 회원으로 나누는 예를 보자.
![[스크린샷 2023-05-10 오후 9.52.03.png]]

이 경우, 분명 `Null` 값을 가진 공간이 사라지긴 한다.
하지만, 차가 없던 회원이 차를 가지게 되는 경우에는 테이블 간 엔티티(Entity)[^1]의 이동이 일어나야 하기에 두 테이블 모두 수정해야 하기에 부하가 발생한다.

그러면, 다음과 같이 테이블을 분할해 보는 방식은 어떤가?
![[스크린샷 2023-05-10 오후 11.19.05.png]]

이렇게 하면 `Null` 값에 공간을 낭비하지 않아도 되고, 고객이 새로 차를 갖게 되는 경우 자동차 테이블에 새로운 엔티티를 추가하기만 하면 된다.
그리고 자동차에는 그 자동차의 소유주임을 확인할 수 있는 고유 어트리뷰트(attribute)[^2]가 붙는다.
정리된 테이블들을 그림으로 나타내면 다음과 같다.
![[스크린샷 2023-05-11 오전 7.44.27.png]]

이 참조무결성은 테이블 간의 관계를 표현하는 것이 중요하다.
위와 같이 두 테이블은 부모 테이블인 회원 정보의 프라이머리 키(Primary Key)를 공유한다.
이 프라이머리 키는 회원을 구분할 수 있는 회원의 고유 정보여야 하고, 현재로도 앞으로도 겹치는 일이 없을 만한 어트리뷰트여야 한다.

그럼, 현실에서 어떤 정보가 부모 테이블에 해당되고 자식 테이블에 해당하는지를 판별해내는 방법이 있으면 좋을 것 같다.
이는 다음 문장을 통해 알아낼 수 있다.
*고객이 차를 소유한다 → 능동
차는 고객에게 소유된다 → 수동*

능동으로 표현되는 문장의 주어 엔티티에 해당하는 것이 부모 테이블에 들어가고, 그 반대는 자식 테이블에 들어간다.

[^1]: 엔티티란, 데이터베이스에 속한 어떤 객체를 말한다. 일종의 단위로서, 여기서는 '회원'이 엔티티에 해당한다.
[^2]: 어트리뷰트란, 엔티티의 성질을 의미한다. 여기서는 회원의 각종 정보, 주민번호, 전화번호, 이름 등이 이에 해당한다.