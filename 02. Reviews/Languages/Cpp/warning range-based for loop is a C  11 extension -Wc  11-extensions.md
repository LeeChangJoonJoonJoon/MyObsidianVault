

2023-05-06

----
#Cpp #CS #CLion #문제 #문제해결 #warning #error #Xcode

## 개요
[[기기의 CPU 자원을 모두 사용하지 못할 때]]의 두번째 예제를 실행하던 도중 다음과 같은 메시지가 출력되었다.
```C++
warning: range-based for loop is a C++11 extension [-Wc++11-extensions]
```

컴파일러가 `for` 문 내에 있는 `:` 등을 읽어내지 못하는 상태였다.
함께 수업을 듣는 동료들에게 물어보니, 이는 C++의 버전 문제라고 한다. 
여기서 `c++11`이라고 명시한 대로, 모던 C++ 11 버전을 설치해야 한다고 한다. 
그래서! Rider에 모던 C++을 설치하는 방법을 여기에 적어 본다.

## 내용
필자는 Apple Silicon 환경에서 C++ 개발환경을 세팅하고자 한다.
우선 Xcode가 깔려 있어야 한다.
다음과 같이 확인해 보자.
![[스크린샷 2023-05-09 오후 5.09.08.png]]

위와 같이 에러를 뱉어 내면 정상적으로 깔려 있는 것이다.
(혹시나 깔려 있지 않으면, App Store를 통해서 깔기보다 `xcode-select --install`을 입력하여 까는 게 훨씬 빠르다. 참고.)

다음 명령어를 통해 `gcc-11`을 깔아 줘야 한다. 
```unix
brew install gcc@11
```

이는 모던 C++의 컴파일러 버전이다.

Homebrew를 통해 설치한 `formulae` 프로그램들은 숨김파일이다.
이 숨김 파일에 접근하려면, 방금 `gcc@11`을 설치한 터미널에 들어가서 설치된 파일 위치를 `command + 클릭`해야 한다.
![[스크린샷 2023-05-09 오후 5.30.09.png]]

(맨 아래줄에 있는 것이 `gcc@11`의 파일 위치이다.)
여기서 `bin` 폴더에 들어가면 다음과 같이 `gcc-11`을 찾을 수 있다.
![[스크린샷 2023-05-09 오후 5.31.20.png]]


이제 CLion에 들어간다.
`Settings` → `Build, Execution, Deployment` → `Toolchains`에 들어가면 다음과 같은 창을 볼 수 있다.
![[스크린샷 2023-05-09 오후 5.03.30.png]]

(참고로, 왼쪽에 나와 있는 목록에 `default`라고 표시돼 있는 경우가 많은데, 크게 상관 안해도 된다.)
필자의 경우 컴파일러의 위치를 이미 지정한 모습을 볼 수 있다.
`C++ Compiler` 줄에 있는 맨 오른쪽 파일 박스를 누르면 다음과 같이 나온다.
![[스크린샷 2023-05-09 오후 5.26.27.png]]

아까 찾아냈던 `gcc-11`의 상위 폴더인 `bin`을 이 창에 드래그해서 넣어준 뒤,
`open`을 누르고 `Apply` → `OK`를 하면 된다.
그러면 다음과 같이 컴파일러가 아름답게 동작하는 모습을 볼 수 있다.
형형색색의 키워드들을 보니 마음이 놓인다.
![[스크린샷 2023-05-09 오후 5.35.39.png]]

### 번외
필자는 어떤 이유 때문인지 Xcode의 `Command Line Tool`을 선택하여 C++ 프로젝트를 생성하면 무한로딩(과 응답 없음)에 빠지는 문제를 겪었다. 
Xcode를 몇번이나 재설치하고 '시스템 정보'와 '콘솔' 앱에서 로우레벨 로그를 퍼서 구글과 ChatGPT에 물어 보았지만 아무도 알려주지 않았다.

비슷한 문제를 겪은 사람이 별로 없었다.
아마 필자처럼 실수로 컴파일러를 지워버리는 사람이 없어서 그런 듯 하다.

하지만 앞서 한 바와 같이 `gcc-11`을 설치하고 default 컴파일러를 다음 명령어를 통해 설정해준 뒤로는 Xcode로 C++ 프로젝트가 아주 원활하게 생성되었다.
```unix
export CC=/usr/local/bin/gcc-11
```

해결!